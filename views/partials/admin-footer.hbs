<footer class="main-footer">
  <strong>Copyright &copy; 2021-2021 <a href="https://changeit.uz">Change IT academy</a>.</strong>
  All rights reserved.
</footer>

<!-- Control Sidebar -->
<aside class="control-sidebar control-sidebar-dark">
  <!-- Control sidebar content goes here -->
</aside>
<!-- /.control-sidebar -->
</div>
<!-- ./wrapper -->

<!-- jQuery -->
<script src="/plugins/jquery/jquery.min.js"></script>
<!-- jQuery UI 1.11.4 -->
<script src="/plugins/jquery-ui/jquery-ui.min.js"></script>
<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
<script>
  $.widget.bridge('uibutton', $.ui.button)
</script>
<!-- Bootstrap 4 -->
<script src="/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- ChartJS -->
<script src="/plugins/chart.js/Chart.min.js"></script>
<!-- Sparkline -->
<script src="/plugins/sparklines/sparkline.js"></script>
<!-- JQVMap -->
<script src="/plugins/jqvmap/jquery.vmap.min.js"></script>
<script src="/plugins/jqvmap/maps/jquery.vmap.usa.js"></script>
<!-- jQuery Knob Chart -->
<script src="/plugins/jquery-knob/jquery.knob.min.js"></script>
<!-- daterangepicker -->
<script src="/plugins/moment/moment.min.js"></script>
<script src="/plugins/daterangepicker/daterangepicker.js"></script>
<!-- Tempusdominus Bootstrap 4 -->
<script src="/plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js"></script>
<!-- Summernote -->
<script src="/plugins/summernote/summernote-bs4.min.js"></script>
<!-- overlayScrollbars -->
<script src="/plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js"></script>
<!-- AdminLTE App -->
<script src="/dist/js/adminlte.js"></script>

<script src="/scripts/app.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="/dist/js/demo.js"></script>
<!-- AdminLTE dashboard demo (This is only for demo purposes) -->
<script src="/dist/js/pages/dashboard.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"
  integrity="sha512-qTXRIMyZIFb8iQcfjXWCO8+M5Tbc38Qi5WzdPOYZHIlZpzBHG3L3by84BBBOiRGiEb7KKtAOAs5qYdUiZiQNNQ=="
  crossorigin="anonymous" referrerpolicy="no-referrer"></script>
{{#if isProject}}
<script>

  getLeftDate();
  function getLeftDate() {


    $(document).ready(function () {

      let projectDeadline =
        document.querySelectorAll(".project_deadline1");

      projectDeadline.forEach(c => {
        const parent = c.parentNode.parentNode.parentNode
        const projectTime = parent.querySelector('.project_progress small .projectTime #timer_wrap')
        function get_timer() {
          let date_t = new Date(c.innerHTML);
          let date = new Date();
          let timer = date_t - date;

          if (date_t > date) {
            let day = parseInt(timer / (60 * 60 * 1000 * 24));
            if (day < 10) {
              day = "0" + day;
            }
            day = day.toString();
            let hour = parseInt(timer / (60 * 60 * 1000)) % 24;
            if (hour < 10) {
              hour = "0" + hour;
            }
            hour = hour.toString();
            let min = parseInt(timer / (1000 * 60)) % 60;
            if (min < 10) {
              min = "0" + min;
            }
            min = min.toString();
            let sec = parseInt(timer / 1000) % 60;
            if (sec < 10) {
              sec = "0" + sec;
            }
            sec = sec.toString();
            if (
              day[1] == 9 &&
              hour[0] == 2 &&
              hour[1] == 3 &&
              min[0] == 5 &&
              min[1] == 9 &&
              sec[0] == 5 &&
              sec[1] == 9
            ) {
              animation(projectTime.querySelector("#day0"), day[0]);
            } else {
              projectTime.querySelector("#day0").innerHTML = day[0];
            }
            if (
              hour[0] == 2 &&
              hour[1] == 3 &&
              min[0] == 5 &&
              min[1] == 9 &&
              sec[0] == 5 &&
              sec[1] == 9
            ) {
              animation(projectTime.querySelector("#day1"), day[1]);
            } else {
              projectTime.querySelector("#day1").innerHTML = day[1];
            }
            if (
              hour[1] == 3 &&
              min[0] == 5 &&
              min[1] == 9 &&
              sec[0] == 5 &&
              sec[1] == 9
            ) {
              animation(projectTime.querySelector("#hour0"), hour[0]);
            } else {
              projectTime.querySelector("#hour0").innerHTML = hour[0];
            }
            if (min[0] == 5 && min[1] == 9 && sec[0] == 5 && sec[1] == 9) {
              animation(projectTime.querySelector("#hour1"), hour[1]);
            } else {
              projectTime.querySelector("#hour1").innerHTML = hour[1];
            }
            if (min[1] == 9 && sec[0] == 5 && sec[1] == 9) {
              animation(projectTime.querySelector("#min0"), min[0]);
            } else {
              projectTime.querySelector("#min0").innerHTML = min[0];
            }
            if (sec[0] == 5 && sec[1] == 9) {
              animation(projectTime.querySelector("#min1"), min[1]);
            } else {
              projectTime.querySelector("#min1").innerHTML = min[1];
            }
            if (sec[1] == 9) {
              animation(projectTime.querySelector("#sec0"), sec[0]);
            } else {
              projectTime.querySelector("#sec0").innerHTML = sec[0];
            }
            animation(projectTime.querySelector("#sec1"), sec[1]);
            setTimeout(get_timer, 1000);
          } else {
            projectTime.querySelector("#clock").innerHTML = "<span id='stop'>Ran out of time!</span>";
          }
        }
        function animation(vibor, param) {
          vibor.innerHTML = param
        }
        get_timer();
      }) 

    });
  }

</script>
{{/if}}

{{#if isView}}
<script>

  getLeftDate();
  function getLeftDate() {
    const projectDeadline =
      document.querySelector(".project_deadline").innerHTML;

    $(document).ready(function () {


      function get_timer() {
        let date_t = new Date(projectDeadline);
        let date = new Date();
        let timer = date_t - date;

        if (date_t > date) {
          let day = parseInt(timer / (60 * 60 * 1000 * 24));
          if (day < 10) {
            day = "0" + day;
          }
          day = day.toString();
          let hour = parseInt(timer / (60 * 60 * 1000)) % 24;
          if (hour < 10) {
            hour = "0" + hour;
          }
          hour = hour.toString();
          let min = parseInt(timer / (1000 * 60)) % 60;
          if (min < 10) {
            min = "0" + min;
          }
          min = min.toString();
          let sec = parseInt(timer / 1000) % 60;
          if (sec < 10) {
            sec = "0" + sec;
          }
          sec = sec.toString();
          if (
            day[1] == 9 &&
            hour[0] == 2 &&
            hour[1] == 3 &&
            min[0] == 5 &&
            min[1] == 9 &&
            sec[0] == 5 &&
            sec[1] == 9
          ) {
            animation($("#day0"), day[0]);
          } else {
            $("#day0").html(day[0]);
          }
          if (
            hour[0] == 2 &&
            hour[1] == 3 &&
            min[0] == 5 &&
            min[1] == 9 &&
            sec[0] == 5 &&
            sec[1] == 9
          ) {
            animation($("#day1"), day[1]);
          } else {
            $("#day1").html(day[1]);
          }
          if (
            hour[1] == 3 &&
            min[0] == 5 &&
            min[1] == 9 &&
            sec[0] == 5 &&
            sec[1] == 9
          ) {
            animation($("#hour0"), hour[0]);
          } else {
            $("#hour0").html(hour[0]);
          }
          if (min[0] == 5 && min[1] == 9 && sec[0] == 5 && sec[1] == 9) {
            animation($("#hour1"), hour[1]);
          } else {
            $("#hour1").html(hour[1]);
          }
          if (min[1] == 9 && sec[0] == 5 && sec[1] == 9) {
            animation($("#min0"), min[0]);
          } else {
            $("#min0").html(min[0]);
          }
          if (sec[0] == 5 && sec[1] == 9) {
            animation($("#min1"), min[1]);
          } else {
            $("#min1").html(min[1]);
          }
          if (sec[1] == 9) {
            animation($("#sec0"), sec[0]);
          } else {
            $("#sec0").html(sec[0]);
          }
          animation($("#sec1"), sec[1]);
          setTimeout(get_timer, 1000);
        } else {
          $("#clock").html("<span id='stop'>Ran out of time!</span>");
        }
      }
      function animation(vibor, param) {
        vibor
          .html(param)
          .css({ marginTop: "-20px", opacity: "0" })
          .animate({ marginTop: "0px", opacity: "1" });
      }
      get_timer();
    });
  }

</script>
{{/if}}

{{#if isTrainee}}

<script>
  AddWorkers();
  function AddWorkers() {
    const addWorker = document.querySelectorAll(".addWorker1");
    const cardBody = document.querySelector(".cardBody");

    let i = 0;
    addWorker.forEach((elem) => {
      elem.addEventListener("click", () => {
        i++;
        const worker = document.createElement(`div`);
        worker.classList.add("workerBlock");
        fetch("/projects/add/worker", {
          method: "get",
        })
          .then((res) => res.json())
          .then((workers) => {
            const html = workers.map((c) => {
              return `
                  <option value="${c._id}">${c.fullname}</option>
                `;
            });
            worker.innerHTML = `
            <div class="form-group col-10">
            <label for="selectGroup${i}">Student</label>
            <select id="selectGroup${i}" class="form-control select2" name="workers" style="width: 100%;">
              ${html}
            </select>
            </div>
             
              <div class="crossRow">
                  <p class="removeWorker1"><svg class="removeWorker1"
                    stroke="currentColor"
                    fill="currentColor"
                    stroke-width="0"
                    version="1.1"
                    viewBox="0 0 16 16"
                    height="1em"
                    width="1em"
                    xmlns="http://www.w3.org/2000/svg"
                  ><path class="removeWorker1"
                      d="M15.854 12.854c-0-0-0-0-0-0l-4.854-4.854 4.854-4.854c0-0 0-0 0-0 0.052-0.052 0.090-0.113 0.114-0.178 0.066-0.178 0.028-0.386-0.114-0.529l-2.293-2.293c-0.143-0.143-0.351-0.181-0.529-0.114-0.065 0.024-0.126 0.062-0.178 0.114 0 0-0 0-0 0l-4.854 4.854-4.854-4.854c-0-0-0-0-0-0-0.052-0.052-0.113-0.090-0.178-0.114-0.178-0.066-0.386-0.029-0.529 0.114l-2.293 2.293c-0.143 0.143-0.181 0.351-0.114 0.529 0.024 0.065 0.062 0.126 0.114 0.178 0 0 0 0 0 0l4.854 4.854-4.854 4.854c-0 0-0 0-0 0-0.052 0.052-0.090 0.113-0.114 0.178-0.066 0.178-0.029 0.386 0.114 0.529l2.293 2.293c0.143 0.143 0.351 0.181 0.529 0.114 0.065-0.024 0.126-0.062 0.178-0.114 0-0 0-0 0-0l4.854-4.854 4.854 4.854c0 0 0 0 0 0 0.052 0.052 0.113 0.090 0.178 0.114 0.178 0.066 0.386 0.029 0.529-0.114l2.293-2.293c0.143-0.143 0.181-0.351 0.114-0.529-0.024-0.065-0.062-0.126-0.114-0.178z"></path></svg></p>
               </div>
            `;
            cardBody.appendChild(worker);
            const crosRow = document.querySelectorAll(".workerBlock");
            crosRow.forEach((elem) => {
              elem.addEventListener("click", function (event) {
                if (event.target.classList.contains("removeWorker1")) {
                  this.remove();
                }
              });
            });
          });
      });
    });

    const crosRow = document.querySelectorAll(".workerBlock");
    crosRow.forEach((elem, index, parent) => {
      elem.addEventListener("click", function (event) {
        if (event.target.classList.contains("removeWorker1")) {
          this.remove();
        }
      });
    });
  }
</script>

{{/if}}